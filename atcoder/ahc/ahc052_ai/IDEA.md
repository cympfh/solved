# AHC052 スコア改善アイデア集

## 問題の特徴分析

- **30×30グリッド**: 900セル全てを訪問が目標
- **10台のロボット**: 同時制御で効率的なカバレッジが重要
- **10個のボタン**: 各ロボットに異なる動作を割り当て可能
- **最大1800操作**: 時間制限内での効率性が鍵
- **壁の存在**: 移動制約を考慮した経路計画が必要

## スコア改善アイデア

### 1. ボタン設定戦略の改善

#### 1.1 役割分担型ボタン設計
- **専用移動ボタン**: 各ロボットが特定方向に特化
  - ボタン0: 全ロボット右移動 (R R R R R R R R R R)
  - ボタン1: 全ロボット左移動 (L L L L L L L L L L)
  - ボタン2: 全ロボット上移動 (U U U U U U U U U U)
  - ボタン3: 全ロボット下移動 (D D D D D D D D D D)

#### 1.2 エリア分割型ボタン設計
- **ロボットグループ化**: グリッドを分割して各ロボットに担当エリア
- **グループ別動作**: エリア内効率移動とエリア間移動を使い分け

#### 1.3 パターン移動ボタン
- **螺旋移動**: 各ロボットが螺旋状に移動してカバレッジ向上
- **ジグザグ移動**: 行または列を順次走査
- **待機制御**: 一部ロボットを待機させて重複を避ける

### 2. 移動戦略の最適化

#### 2.1 貪欲法による未訪問セル優先
- **距離評価**: 各ロボットから最近傍の未訪問セルへの距離を計算
- **動的ボタン選択**: 現在状況に応じて最適なボタンを選択
- **重複回避**: 複数ロボットが同じセルを狙わないよう調整

#### 2.2 全体最適化アプローチ
- **カバレッジ最大化**: 次の1手で最も多くの新規セルを訪問
- **将来予測**: 数手先の状態を予測して最適化
- **局所最適回避**: 一時的に効率が悪くても全体最適を狙う

### 3. アルゴリズム高度化

#### 3.1 ビームサーチ
- **状態空間探索**: 複数の候補状態を並行探索
- **評価関数**: 未訪問セル数 + 分散度 + 効率性を統合評価
- **枝刈り**: 明らかに劣る状態を早期除外

#### 3.2 山登り法・焼きなまし法
- **局所改善**: 現在解からの小さな変更で改善を探索
- **脱出機能**: 局所最適に陥らないよう確率的に悪化を許容
- **温度制御**: 時間経過とともに探索範囲を調整

#### 3.3 遺伝的アルゴリズム
- **ボタン設定進化**: 複数のボタン設定を交叉・突然変異で改良
- **適応度評価**: 実際の移動シミュレーションでスコア評価
- **世代交代**: 優秀な設定を次世代に継承

### 4. 実装レベルの改善

#### 4.1 効率的なシミュレーション
- **高速状態更新**: ロボット位置更新の最適化
- **キャッシュ活用**: 計算済み結果の再利用
- **並列処理**: 複数候補の並行評価

#### 4.2 動的時間配分
- **探索時間制御**: 残り時間に応じて探索深度を調整
- **早期終了判定**: 完全解発見時の即座終了
- **品質保証**: 最低限の解品質を担保

### 5. 具体的実装案

#### 5.1 GreedySolver
```rust
struct GreedySolver {
    // 現在位置から最近傍未訪問セルへの貪欲移動
    // ボタン設定: 各方向専用 + 混合パターン
    // 評価: 未訪問セル到達効率
}
```

#### 5.2 BeamSearchSolver
```rust
struct BeamSearchSolver {
    // ビーム幅で複数状態を並行探索
    // 評価関数: カバレッジ + 分散 + 効率
    // 深度: 計算時間と品質のバランス
}
```

#### 5.3 HybridSolver
```rust
struct HybridSolver {
    // 序盤: GreedyまたはBeamSearch
    // 中盤: 局所最適化
    // 終盤: 残存セルの効率的回収
}
```

### 6. デバッグ・分析機能

#### 6.1 可視化機能
- **グリッド表示**: 現在のロボット位置と訪問状況
- **移動軌跡**: 各ロボットの移動履歴
- **効率分析**: ターン毎の新規訪問セル数

#### 6.2 統計情報
- **カバレッジ率**: 時間経過による訪問率変化
- **ロボット稼働率**: 各ロボットの有効移動割合
- **壁衝突率**: 無効移動の発生頻度

### 7. 実装優先度

1. **高優先度**: GreedySolver（貪欲法による基本改善）
2. **中優先度**: 役割分担型ボタン設計
3. **中優先度**: BeamSearchSolver（探索の高度化）
4. **低優先度**: 焼きなまし法・遺伝的アルゴリズム
5. **低優先度**: 可視化・分析機能

現在のRandomWalkSolverのスコア386点を、まずは500-600点台に改善することを目標とする。